---
import Tags from "./Tags.astro";

import { type CollectionEntry } from "astro:content";
import { capitalize } from "../utils/utils";
import { Icon } from "astro-icon/components";

type Props = {
  post: CollectionEntry<"blog">;
};

const {
  data: { title, description, datePublished, tags, category },
  slug,
} = Astro.props.post;
---

<article>
  <a href=`/blog/${slug}`>
    <h2>{title}</h2>
  </a>
  <p>{description}</p>
  <div>
    <p>
      <Icon name="mdi:calendar" />
      <strong>published:</strong>
      {
        datePublished.toLocaleDateString("en-US", {
          day: "numeric",
          month: "long",
          year: "numeric",
        })
      }
    </p>
  </div>
  <div>
    <p>
      <Icon name="mdi:category" />
      <strong>category:</strong>
      <a href=`/blog/categories/${category.toLowerCase()}`
        >{capitalize(category)}</a
      >
    </p>
  </div>
  <div>
    <Icon name="mdi:tag" />
    <strong>tags:</strong>
    <Tags {tags} />
  </div>

  <style>
    article {
      display: flex;
      gap: 1em;
      flex-direction: column;
      align-items: flex-start;
      padding: 1em;
      border: 1px solid lightslategray;
      border-radius: 0.5rem;
      margin-top: 0.25rem;
      margin-bottom: 0.25rem;
    }
  </style>
</article>
